<html>
  <head>
    <script src="https://code.createjs.com/easeljs-0.8.0.min.js"></script>
    <script src="https://code.createjs.com/tweenjs-0.6.2.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <title>User Interface</title>
    <style>
      #canvas {
          border: solid 1px black;
          background-image: url("https://static.pexels.com/photos/53594/blue-clouds-day-fluffy-53594.jpeg");
      }
    </style>
  </head> 
  <body>
    <canvas id="canvas"></canvas><br>
    <script >
      
      var socket = io();
      stage = new createjs.Stage("canvas");
      canvas = document.querySelector('canvas');
      canvas.width = window.innerWidth-50;
      canvas.height = window.innerHeight-50;
      
      var color, ID, size;
      
      
      socket.on('user connected', function(UserId){ 
      ID = UserId;
      color = '#' + Rand(0, 256).toString(16) + Rand(0, 256).toString(16) + Rand(0, 256).toString(16);
      size = Rand (5, 50);
      window[UserId] = new createjs.Shape();
      window[UserId].graphics.beginFill(color).drawCircle(0, 0, size);
      window[UserId].x = Rand(20,canvas.width);
      window[UserId].y = Rand(20,canvas.height);
      stage.addChild(window[UserId]);  
        
      createjs.Ticker.addEventListener("tick", onTickHandler);
      socket.emit('user done',  window[UserId].x,  window[UserId].y, color, size, ID);
      
      window[UserId].on("pressmove", function(evt) {
      evt.target.x = evt.stageX;
      evt.target.y = evt.stageY;
      socket.emit('move done', {x: window[UserId].x, y: window[UserId].y}, ID);
      });      
      
      socket.on('user disconnected', function(UserId){
        stage.removeChild(window[UserId]);
      });     
      
      function onTickHandler(evt) {   
          stage.update();
        };
      
      function Rand(min, max){
        return Math.random() * (max - min) + min;
      }
    
        
    </script>
  </body>
</html>
